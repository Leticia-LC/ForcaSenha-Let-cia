<main>
    <div class="container">
        <h1>Verificar força da senha</h1>

        <div class="input-btn">
            <input type="password" id="iPass" oninput="checkPasswordStrength()">
            <div class="progresso">
                <div class="barraProgresso" id="password-strength-fill"></div>
            </div>
            <span id="strength"></span>
        </div>
        <button type="button" id="btn" onclick="togglePasswordVisibility()">Mostrar</button>

        <h2>Composição da Senha</h2>
        <p>Garanta que sua senha seja longa o suficiente e que contenha vários tipos de caracteres.</p>
        <div class="composition">
            <div class="check">
                <i class="bx least12 meh" id="least12Icon"></i>
                <p class="least12">Ao menos 12 caracteres</p>
            </div>
            <div class="check">
                <i class="bx lower meh" id="lowerIcon"></i>
                <p class="lower">Letra minúscula</p>
            </div>
            <div class="check">
                <i class="bx upper meh" id="upperIcon"></i>
                <p class="upper">Letra maiúscula</p>
            </div>
            <div class="check">
                <i class="bx symbol meh" id="symbolIcon"></i>
                <p class="symbol">Símbolos (?#@...)</p>
            </div>
            <div class="check">
                <i class="bx numbers meh" id="numbersIcon"></i>
                <p class="numbers">Números</p>
            </div>
        </div>
    </div>
</main>

<footer></footer>

<script>
    let inputSenha = document.querySelector('#iPass');
    let btn = document.querySelector('#btn');
    inputSenha.focus();

    function togglePasswordVisibility() {
        if (inputSenha.type === 'password') {
            inputSenha.type = 'text';
            btn.innerHTML = 'Esconder';
        } else {
            inputSenha.type = 'password';
            btn.innerHTML = 'Mostrar';
        }
    }

    function checkPasswordStrength() {
        const password = inputSenha.value;
        let strength = 0;

        if (password.length > 1) strength += 1;
        if (password.length > 6) strength += 2;
        if (password.length >= 10) strength += 3;
        if (password.length >= 12) strength += 4;
        if (password.length >= 14) strength += 5;

        const progressBar = document.getElementById("password-strength-fill");
        progressBar.style.width = (strength * 10) + "%";

        const icons = document.querySelectorAll('.bx');

        icons.forEach(icon => {
            icon.className = 'bx meh';
        });

        if (password.length >= 12) {
            document.querySelector('#least12Icon').className = 'bx happy';
        }
        if (/[A-Z]/.test(password)) {
            strength += 1;
            document.querySelector('#upperIcon').className = 'bx happy';
        }
        if (/[a-z]/.test(password)) {
            strength += 1;
            document.querySelector('#lowerIcon').className = 'bx happy';
        }
        if (/[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]/.test(password)) {
            strength += 2;
            document.querySelector('#symbolIcon').className = 'bx happy';
        }
        if (/\d/.test(password)) {
            strength += 1;
            document.querySelector('#numbersIcon').className = 'bx happy';
        }

        let strengthText = "";
        if (strength >= 9) {
            strengthText = "Senha Forte";
        } else if (strength > 5) {
            strengthText = "Senha Moderada";
        } else {
            strengthText = "Senha Fraca";
        }

        document.getElementById("strength").innerText = strengthText;
    }
</script>
</body>
</html>